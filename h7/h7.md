# H7 Maalisuoralla
Kotitehtävä h7 Maalisuoralla Tero Karvisen Tunkeutumistestaus 2025 syksy -kurssille. [Linkki kurssisivulle](https://terokarvinen.com/tunkeutumistestaus/)
Jokaisessa kohdassa on alla olevalla "quote" tyylillä kerrottu tehtävänanto.
>Liirum laarum laa...

## Tehtävät

### b)
> HTB Dancing. Ratkaise HackTheBox.com: [Starting Point:](https://app.hackthebox.com/starting-point) Tier 0: Dancing.

Aloitin tehtävän lataamalla VPN tiedoston, jotta pystyn yhdistämään kyseiseen koneeseen omalta virtuaalikoneeltani.

![alt text](image.png)

Ladattuani tiedoston siirsin sen virutaalikoneelleni, jonka jälkeen käytin komentoa `openvpn <tiedostonsijainti>`.

![alt text](image-1.png)

Tuli errori. Katsoin apua HTB:n forumilta ja kyseinen errori johtui siitä, että en suorittanut komentoa sudona, `sudo openvpn Desktop/testivpn.ovpn.`.

Käynnistin kohdekoneen HTB:ssa ja se antoi ip:n

![alt text](image-3.png)

Pingasin ip:n, yhteys toimii ja sain yhteyden kohdekoneeseen. 

![alt text](image-2.png)

#### Task 1
>What does the 3-letter acronym SMB stand for?
server message block

![alt text](image-3.png)

#### Task 2
> What port does SMB use to operate at?
445

![alt text](image-4.png)

#### Task 3
> What is the service name for port 445 that came up in our Nmap scan?

Runasin nmap komennon `sudo nmap -A -T4 -p- 10.129.105.170 -oA htb
`. Komento skannaa kohdekoneen jokaisen portin ja tallentaa tiedot `htb.` tiedostoihin. 

![alt text](image-5.png)

![alt text](image-6.png)

#### Task 4
> What is the 'flag' or 'switch' that we can use with the smbclient utility to 'list' the available shares on Dancing?

Katsoin apua `smbclient --help` komennon avulla. Vastaus oli aika itsestäänselvä, ``-L``. 

![alt text](image-7.png)

#### Task 5
> How many shares are there on Dancing?

![alt text](image-8.png)

![alt text](image-9.png)

#### Task 6
>What is the name of the share we are able to access in the end with a blank password?

![alt text](image-10.png)

#### Task 7
> What is the command we can use within the SMB shell to download the files we find?

![alt text](image-11.png)

#### Task 8
> Submit root flag

Tässä kohtaa olin himean pihalla, että mistä tuo lippu pitäisi saada. Tulin kuitenkin päätelmään aikasemmista tehtävistä, että: yhdistä smb --> Workshares --> Lataa tiedostot.

Yritin uudestaan listata listata "sharet", mutta tuli tälläinen errori. Pingi kuitenkin toimi, mutta nmap ei löytänyt portteja.

![alt text](image-12.png)

![alt text](image-13.png)

![alt text](image-15.png)

Resetoinkin kohdekoneen, jos se auttaisi ongelmaan

![alt text](image-14.png)

Resetoinni jälkeen taas toimi.

![alt text](image-16.png)

Seuraavaksi yhdistinkin haavoittuvaiseen Shareen "WorkShares", jossa ei ollut salasanaa. 

![alt text](image-17.png)

Lähdinkin tutkimaan konetta.

![alt text](image-18.png)

Lippu löytyi James.P/ kansiosta. Siirsin tiedoston omalle koneelleni, jonka jälkeen katsoin tiedoston sisälle.

![alt text](image-19.png)

Sitten testasin flagia ja sain suoritettua Dancing koneen loppuun.

![alt text](image-20.png)

![alt text](image-21.png)

### c)
> HTB Responder. Ratkaise HackTheBox.com: [Starting Point](https://app.hackthebox.com/starting-point): Tier 1: Responder.

#### Task 1
> When visiting the web service using the IP address, what is the domain that we are being redirected to?

Kirjoitin koneen ip:n nettiselaimeen ja se uudelleenohjasi osoitteeseen unika.htb

![alt text](image-22.png)

![alt text](image-23.png)

#### Task 2
> Which scripting language is being used on the server to generate webpages?

Curlasin sivuston ja siellä näkyi PHP, jota käytetään juuri esimerkiksi nettisivuilla back-end puolella.

![alt text](image-24.png)

![alt text](image-25.png)

#### Task 3
> What is the name of the URL parameter which is used to load different language versions of the webpage?

Tässä kohtaa olin himean pihalla, joten päätin katsoa "Official Writeup" kyseisestä boksista. Ongelma on, että kyseinen kone on sellainen, jonka ip hostaa monta nettisivua, joten pelkkä ip:n laittaminen ei riitä. Tätä varten suoritin komennon `echo "10.129.95.234 unika.htb" | sudo tee -a /etc/hosts
`. Nyt sivusto näkyy ja saan jatkettua tehtävää.

![alt text](image-26.png)


Tehtävä oli etsiä url parametri, jolla ladataan eri kielet. Vaihdoinkin oikeasta yläkulmasta en --> fr (french) ja url muuttui. 

![alt text](image-27.png)

Vastaus on page

![alt text](image-28.png)

#### Task 4 
> Which of the following values for the `page` parameter would be an example of exploiting a Local File Include (LFI) vulnerability: "french.html", "//10.10.14.6/somefile", "../../../../../../../../windows/system32/drivers/etc/hosts", "minikatz.exe"



# Lähteet
https://help.hackthebox.com/en/articles/5185536-connection-troubleshooting